using BenchmarkDotNet.Attributes;
using BenchmarkDotNet.Order;
using StringEnricher.Benchmarks.AnalogueImplementations;
using StringEnricher.Telegram.Helpers.MarkdownV2;

namespace StringEnricher.Benchmarks.Escaping;

[MemoryDiagnoser]
[Orderer(SummaryOrderPolicy.FastestToSlowest)]
[RankColumn]
[MinColumn]
[MaxColumn]
[MeanColumn]
[MedianColumn]
public class MarkdownV2EscapeBenchmarks
{
    [Params(
        "string to escape",
        "_*~`#+-=.![](){}>|\\",
        "Hello_World!",
        "Привет_мир! 你好_世界! 😀_😃_😄",
        "___***!!!",
        "",
        null,
        "_start middle* end!",
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod", // long no escapable
        "Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua Lorem ipsum dolor sit amet, consectetur adipiscing elit Sed do eiusmo_", // LongSingleEscapableAtEnd
        "_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![](){}>|\\_*~`#+-=.![" // LongAllEscapable
    )]
    public string Input;

    [Benchmark(Baseline = true)]
    public string EscapeStringBuilder() => MarkdownV2StringBuilder.Escape(Input);

    [Benchmark]
    public string EscapeStringBuilderPrecise() => MarkdownV2StringBuilderPrecise.Escape(Input);

    [Benchmark]
    public string EscapeStringCreate() => MarkdownV2.Escape(Input);

    [Benchmark]
    public string EscapeStringCreateFrozenSet() => MarkdownV2StringCreateFrozenSet.Escape(Input);
}